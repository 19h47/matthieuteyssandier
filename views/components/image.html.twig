{#
 # Image
 #
 # @param array classes
 # @param string loading
 # @param array image
 # @param object attributes
 # @param string size
 #
 # @package WordPress
 # @subpackage MatthieuTeyssandier
 #}
{% if image %}

	{% set image = get_image( image ) %}

	<picture>

		<source type="image/webp" srcset="{{ image.src( size | default( 'full' ) ) | towebp( 100 ) }}">

		<img
			class="{{ classes ? classes | join( ' ' ) : '' }}"
			loading="{{ loading | default( 'lazy' ) }}"
			src="{{ image.src( size | default( 'full' ) ) }}"
			alt="{{ image.alt }}"
			width="{{ image.sizes[ size ].width | default( image.width ) }}"
			height="{{ image.sizes[ size ].height | default( image.height ) }}"
			srcset="{{ image.srcset( size | default( 'full' ) ) }}"
			sizes="{{ image.img_sizes( size | default( 'full' ) ) }}"
			{{ attributes ? attributes | map( ( value, key ) => "#{key}=\"#{value}\"" ) | join( ' ' ) | raw }}
		>

	</picture>
{% endif %}


{#
 # Index
 #
 # @package WordPress
 # @subpackage MatthieuTeyssandier
 # @author Jérémy Levron <jeremylevron@19h47.fr> (https://19h47.fr)
 #}
<!DOCTYPE html>
<html
    itemscope
    itemtype="http://schema.org/WebPage"
    {{ html_class( 'no-js no-touch is-ontop is-loading' ) }}
    {{ site.language_attributes }}
    data-template="{{ template | default( 'index' ) }}"
>

	<head>

		<meta charset="{{ site.charset }}">
		<link rel="profile" href="http://gmpg.org/xfn/11">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,viewport-fit=cover">
		<meta name="format-detection" content="telephone=no">

		{{ function( 'wp_head' ) }}

	</head>

	<body
		data-module-load="main"
		data-theme-url="{{ current_url }}"
		data-mode="{{ mode | default( 'light' ) }}"
		class="transition-colors {{ 'dark' == mode ? 'bg-red-very-dark text-gray-light' : 'bg-gray-light text-black' }}"
	>

		{% block header %}
			{{- include( 'header.html.twig', { classes: [] } ) -}}
		{% endblock %}

		<div class="fixed top-0 bottom-0 left-0 right-0 z-40 pointer-events-none">
			{% for case in case_studies %}
				<div
					class="absolute top-0 bottom-0 left-0 right-0 invisible h-screen pb-10 opacity-0 pointer-events-auto transition-opacity-visibility duration-450 ease-out-cubic pt-43"
					data-module-nav-item="{{ case.id }}"
				>
					<div class="container h-full">
						<div class="h-full row">
							<div class="flex flex-col col-4/12">
								<ul class="flex flex-wrap -mx-3 -my-2">
									{% for cat in case.terms( 'case_study_cat' ) %}
										<li class="mx-3 my-2"><p class="text-black button">{{- cat.name -}}</p></li>
									{% endfor %}
								</ul>

								<p class="mt-auto">
									<a class="inline-flex items-center text-black bg-white border-none button" href="{{ case.link }}">
										{{- __( 'Discover' ) -}}{{- icon( 'arrow-right', { classes: [ 'ml-1', 'w-2', 'h-2', 'fill-current' ] } ) -}}
									</a>
								</p>
							</div>

							<div class="h-full col-8/12">
								<div class="relative h-full overflow-hidden after:z-20 after:bg-black after:w-full after:absolute after:top-0 after:right-0 after:bottom-0 after:h-full after:mix-blend-hard-light after:opacity-20 rounded-5xl">
									<div class="absolute z-30 bottom-0 left-0 right-0 mx-10 mb-10 uppercase text-white break-words text-15xl leading-[.85]">{{- case.title -}}</div>
									{{- include( 'components/image.html.twig', { size: 'size-8', image: case.thumbnail, classes: [ 'relative', 'z-10', 'w-full', 'h-full', 'object-cover', 'object-center' ] } ) -}}
								</div>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>

		<div data-load-container data-load="container" data-mode="{{ mode | default( 'light' ) }}">
			<div id="{{ post.id ? "page-#{post.id}" : 'page' }}" {{ body_class( 'page-content' ) }} data-module-scroll="main">


				{% block content %}
					{% block blocks %}

						{% if post.meta( 'layouts' ) %}
							<div class="my-6 first:mt-0 last:mb-0">
								{% for layout in post.meta( 'layouts' ) %}
									{{-
										include(
											"layouts/#{ layout.acf_fc_layout | lower | replace( { '_' : '-' } ) }.html.twig",
											{
												props: layout,
												index: loop.index,
												classes: [ loop.first ? 'is-first' : '', loop.last ? 'is-last' : '', 'first:mt-0 last:mb-0' ],
												color: post.meta( 'color' ),
											},
											ignore_missing = true
										)
									-}}
								{% endfor %}
							</div>
						{% endif %}

					{% endblock %}
				{% endblock %}

				{% block footer %}
					{{- include( 'footer.html.twig' ) -}}
				{% endblock %}

			</div>

		</div>

		{{ function( 'wp_footer' ) }}
		<canvas class="absolute inset-0 w-full h-full pointer-events-none z-5" data-module-nav-backdrop></canvas>
		<div id="svg-sprite" style="display: none;">{{- include( 'icons.svg' ) -}}</div>

	</body>

</html>
